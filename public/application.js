var pages = JSON.parse(
  "{\"808\":\"Pay your workers what you owe them \",\"807\":\"Justin Trudeau: Give postal banking a chance\",\"806\":\"Social Security for Teachers \",\"805\":\"STOP NESTLÉ FROM SUCKING MY STATE DRY\",\"804\":\"Jetzt die Fusion von Bayer und Monsanto stoppen! \",\"803\":\"Beyoncé: you're too good for Philip Green\",\"802\":\"Free Morgan!\",\"800\":\"Congress: protect our planet and stop TPP. \",\"799\":\"Do the CETA Check!\",\"798\":\"Magnum's dirty secret\",\"797\":\"Unilever: fix your palm oil policy -- NOW!\",\"796\":\"Unilever and Magnum: we may want ice cream, but not if it contains conflict palm oil. \",\"795\":\"Stop the Monsanto-Bayer merger!\",\"794\":\"Stop making people homeless!\",\"793\":\"Help show Trump we won't accept xenophobia and bigotry\",\"792\":\"Nestlé: Don't build a water bottling plant in the middle of a desert\",\"791\":\"Meet-up in Ottawa\",\"789\":\"Can you chip in to stop this merger? \",\"788\":\"We have to stop this merger from hell! \",\"787\":\"Stop this TTIP-like trade deal\",\"786\":\"Umweltministerin Hendricks: Bleiben Sie bei Ihrem Nein zu Glyphosat!\",\"785\":\"Myriad: Our genetic data belongs to us, not corporations\",\"784\":\"Chevron's whistleblower needs our help. \",\"783\":\"FCC: Protect our internet privacy!\",\"782\":\"Help stop Nestlé from taking California's water\",\"781\":\"Stand with Domino's Pizza workers!\",\"780\":\"Stand with the People of Colorado!\",\"779\":\"Meet up in Brooklyn on Sunday!\",\"778\":\"German test DD!\",\"777\":\"Philip Green: fund BHS pensions \",\"776\":\"Edeka: Nehmen Sie sich ein Beispiel an Rewe und schmeißen Sie Plastiktüten aus Ihren Filialen!\",\"775\":\"H\\u0026M: Honour your commitments to protect garment workers in Bangladesh.\",\"774\":\"Vielen Dank für Ihre Anmeldung! Wir freuen uns, Sie am Donnerstag kennenzulernen.\",\"773\":\"Treffen wir uns am Donnerstag zum Kaffee!\",\"772\":\"Aidez-nous à faire face à Monsanto\",\"771\":\"No American-style healthcare in New Zealand.  \",\"770\":\"Keep racist algorithms out of our courtrooms\",\"769\":\"Treffen wir uns am Samstag zum Kaffee!\",\"768\":\"President Obama: Make mega-mergers a relic of the past!\",\"766\":\"Regierungen der EU-Länder: Stoppen Sie Glyphosat, lehnen Sie den Vorschlag der EU-Kommission ab!\",\"765\":\"Une Europe sans glyphosate est à portée de main !\",\"764\":\"Tell the EPA to act on bee-killing pesticides now!\",\"763\":\"Ferrovial: end operations of illegal detention centres today. \",\"762\":\"PepsiCo, Coca Cola, Danone: Beteiligen Sie die Guarani an Ihren Gewinnen mit Stevia\",\"760\":\"Let Europe go glyphosate-free!\",\"759\":\"Facebook: Stop sponsoring hate\",\"758\":\"We have a great opportunity to stop Kinder Morgan -- if you're in.\",\"757\":\"Bill Cosby's agency sent him \\\"five or six\\\" actresses a week\",\"756\":\"Pelosi: don’t let TPP pass a lame duck vote. \",\"755\":\"CETA – nicht mit mir! Nein zu TTIP 1.0!\",\"754\":\"President Obama: Protect the panther!\",\"753\":\"Bloquez l'acquisition de Monsanto par Bayer\",\"752\":\"Save our oceans from plastic bags! \",\"751\":\"Don't let overfishing wipe out the Maui’s dolphin.\",\"750\":\"Chip in to get a better tax deal for Australians\",\"749\":\"Colgate: Scrap the unnecessarily gendered toothpaste\",\"748\":\"Support Frack Free Ryedale\",\"747\":\"An den österreichischen Ministerrat: Stoppen Sie CETA!\",\"746\":\"Health Canada: Don't approve the world's first GMO salmon!\",\"745\":\"Thanks for signing up - see you there! \",\"744\":\"Help stand up to Roundup\",\"742\":\"Help stand up to Monsanto\",\"741\":\"Meet up in Sheffield on Saturday! \",\"740\":\"Theresa May: ban G4S from all government contracts.\",\"739\":\"Third Energy: don't frack Ryedale\",\"738\":\"Tell Europe's largest health insurers to stop investing in tobacco.\",\"737\":\"Bank of America und Co: Keine neuen Milliardenkredite für Exxon Mobil!\",\"736\":\"Airbnb: Stop driving up our rents!\",\"735\":\"Stop the Bayer-Monsanto mega merger B\",\"734\":\"Le message doit maintenant être clair : mettez fin au glyphosate en Europe\",\"732\":\"Keep our national parks public!\",\"731\":\"Danone: Stop ripping off traditional growers of Stevia leaves. \",\"730\":\"Nestlé: Stop ripping off traditional growers of Stevia leaves. \",\"729\":\"PepsiCo: Stop ripping off traditional growers of Stevia leaves. \",\"728\":\"Coca-Cola: Stop ripping off traditional growers of Stevia leaves. \",\"727\":\"Stop ripping off traditional growers of Stevia leaves.\",\"726\":\"Let Europe go glyphosate-free\",\"725\":\"Demand a panel of experts WITHOUT industry ties rule on glyphosate’s safety\",\"724\":\"Stop the Bayer-Monsanto mega merger\",\"723\":\"Centrica: Don't drill in the Arctic!\",\"722\":\"Bayer: Stoppen Sie die Übernahme von Monsanto!\",\"721\":\"New York Times: Hire a public editor who will keep journalism accountable to the new America\",\"720\":\"BREAKING: Lobbyists applying to break ban on bee-killing pesticides.\",\"719\":\"Let's stop TTIP for good! \",\"718\":\"Keine Finanzierung von Klimakiller Exxon Mobil!\",\"717\":\"Marine Harvest: Keep diseased farmed salmon out of our oceans!\",\"716\":\"Cessez de financer Esso qui nie l'existence du changement climatique\",\"715\":\"We need to stop this merger! \",\"714\":\"Beyoncé: if you truly want to celebrate every woman, pay your workers a proper living wage!\",\"713\":\"Tell our next president to take a stand on offshore drilling in the Gulf of Mexico\",\"712\":\"Guernsey: it's time to act on tax avoidance \",\"711\":\"Stand up to Nestlé in Hood River!\",\"710\":\"Apple: Don't let George Zimmerman sell his gun on your iPhones\",\"708\":\"Unilever: Treten Sie aus FoodDrinkEurope aus!\",\"707\":\"Peter Hargreaves: stop trying to buy our politics!\",\"706\":\"President Obama: Keep our oceans safe\",\"705\":\"Revoke Jim Pattison's fishing licenses \",\"704\":\"Come clean about your tax dodging\",\"703\":\"Help stop Nestle's water grab\",\"700\":\"Nestlé: if you want to fix the world’s health problems, stop selling bad food.\"}"
)

var $actions = $('.actions');

var template = _.template(
  $('script.template').html()
);

var socket = io();

socket.on('actions', function(msg){
  var data = JSON.parse(msg);
  data.title = pages[parseInt(data.page_id, 10)];

  var actionHtml = $(template(data));

  $actions.prepend(actionHtml);

  actionHtml.fadeIn(function(){
    $('.card:gt(50)').remove()
  });
});

